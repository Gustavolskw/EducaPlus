function Ucxyl(a,b){a.Ipd.set(b.id,b)}function Ucyyl(a,b){a.Bog.unshift(b)}function Uczyl(a,b){const c=UcY0j(a,b);if(c instanceof Ucb_j){const d=c.zIa.toJSON();a.ktl.La(d);a.xt.La(b)}return c}var UcAyl=Ucch({s4d:"plain text"});var UcByl=Ucch({H$i:"shape library",npm:"content gallery data panel",Sem:"build"});var UcCyl,UcDyl=UcCyl=class{constructor(a){this.name="generatedUML";this.documentId=a.documentId;this.format=a.format;this.method=a.method;this.iDa=a.iDa;this.userId=a.userId}toJSON(){return UcCyl.sb(this)}};UcDyl=UcCyl=__decorate([Ucfh({documentId:["documentId",Uch],format:["format",UcAyl],method:["method",UcByl],iDa:["nRows",Ucah],userId:["userId",Ucah],name:["name",Uc8g("generatedUML")]}),__metadata("design:paramtypes",[Object])],UcDyl);var UcEyl=class extends UcgD{constructor(a,b,c,d,e){super(a,b,c);this.Ge=e;this.type="advanced_shape_options";this.ba={columns:i18n.get("advanced-options-swimlane-columns"),rows:i18n.get("advanced-options-swimlane-rows")};if(a=d.getProperty(this.Wb(),"RowCount"))this.QVb=this.Ge.create(a),UceD(this,this.QVb);if(d=d.getProperty(this.Wb(),"ColumnCount"))this.BIb=this.Ge.create(d),UceD(this,this.BIb)}Wb(){return UcU0j.className}ngAfterViewInit(){UcfD(this)}get cols(){return this.BIb?this.BIb.Ua():1}set cols(a){this.BIb&&
this.BIb.setValue(a)}get rows(){return this.QVb?this.QVb.Ua():1}set rows(a){this.QVb&&this.QVb.setValue(a)}};UcEyl.Ca=()=>[{type:Uciq},{type:Uc1},{type:Uc2},{type:Uc7U},{type:UctZ}];UcEyl.qa=function(a){return new (a||UcEyl)(UcK(Uciq),UcK(Uc1),UcK(Uc2),UcK(Uc7U),UcK(UctZ))};
UcEyl.Ia=UcG({type:UcEyl,Ea:[["lucid-multi-dimensional-swimlane-advanced-options"]],features:[UcM],Ja:4,Ha:14,Ma:[[3,"label"],[3,"visualStep","scalar","min","max","precision","value","valueChange"]],template:function(a,b){a&1&&(UcP(0,"lucid-rich-menu-item",0)(1,"lucid-spinner",1),UcS("valueChange",function(c){return b.cols=c}),UcQ()(),UcP(2,"lucid-rich-menu-item",0)(3,"lucid-spinner",1),UcS("valueChange",function(c){return b.rows=c}),UcQ()());a&2&&(UcO("label",b.ba.columns),UcL(1),UcO("visualStep",
1)("scalar",1)("min",1)("max",50)("precision",1)("value",b.cols),UcL(1),UcO("label",b.ba.rows),UcL(1),UcO("visualStep",1)("scalar",1)("min",1)("max",50)("precision",1)("value",b.rows))},Ka:[UcGJ,UcuE],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}lucid-spinner[_ngcontent-%COMP%]{max-width:72px}lucid-toggle-icon[_ngcontent-%COMP%] + lucid-toggle-icon[_ngcontent-%COMP%]{margin-left:8px}lucid-click-edit-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border-radius:3px;border:1px solid #979ea8;font-size:14px;max-width:40em;line-height:1.5em;min-height:1.5em;padding:0 4px}lucid-click-edit-text[_ngcontent-%COMP%]   .edit-text-container[_ngcontent-%COMP%]{padding:4px}lucid-rich-menu-item.wide-content[_ngcontent-%COMP%]   lucid-single-select-dropdown[_ngcontent-%COMP%]{width:100%}"],
changeDetection:0});var UcFyl=class{};UcFyl.qa=function(a){return new (a||UcFyl)};UcFyl.qb=Ucdy({type:UcFyl});UcFyl.pb=Uc2x({imports:[Uc4,UcyA,UcOD,UcYK,Ucn_,UcVK,Uc7G]});function UcGyl(a){const b=a.Pn.cia("UMLSequenceGenerator",{x:0,y:0},{},void 0,void 0,{});a=a.document.Bk.get(b);if(a instanceof UcZ0j)return a}function UcHyl(a,b){b.lm();const c=b.Gx();if(c){const d=UcdFf(a.rn,b.getPage(),b.rg.className);a.lb.Mb(new Uclu("SetProperty",{id:b.groupId,Property:Ucfx.key,Value:d}));a.selection.jk([c.id])}else a.selection.jk(b.rB().map(d=>d.id));return c}
var UcIyl=class extends UceZ{constructor(a,b,c,d){super(...a);this.selection=b;this.Pn=c;this.rn=d}kja(){}NNb(){return{w:900,h:320}}};UcIyl=__decorate([Uct(),__param(0,Ucwn(UceZ)),__metadata("design:paramtypes",[void 0,Uc7N,Ucf0,UcKM])],UcIyl);function UcJyl(a,b,c,d){a.user&&a.analytics.s5a.uqa("uml-markup-used",a.user.id,Ucsh,"uml-markup-used");let e;e=c?c.UML_Sequence:b?b.internal.getProperties().get("Markup").UML_Sequence:a.bbl;var f=null==b?void 0:b.getGenerator();let g=void 0;g=f instanceof UcZ0j?f:UcGyl(a.nWd);let h;f=null==(h=g)?void 0:Uczyl(h,Object.assign({},c||{},{UML_Sequence:e}));if(!f||!g)return null;if(f instanceof Ucb_j){c=UcHyl(a.nWd,g);b&&b!==c&&(g.properties.location.La({x:b.Lq.value.x,y:b.Lq.value.y}),a.DO.sJ({items:[b],
yMa:!0}));c&&Array.from(c.uIa.value).forEach(l=>{l instanceof UcjM?a.X0.wz({item:l,Gr:"uml markup"}):l instanceof UcC&&a.X0.wz({item:l,Gr:"uml markup",yk:"uml"})});let k;a.Th.fireEvent(new UcDyl({documentId:null!=(k=a.document.id)?k:"",format:"plain text",method:null!=d?d:"build",iDa:e.split("\n").length,userId:a.user.getId()}));return null}return{message:f.ZW(),lineNum:f.sOf()}}
function UcKyl(a,b,c,d){c=c?Object.assign({},c,{UML_Sequence:c.UML_Sequence.replace(/“|”/g,'"')}):void 0;if(a.user.Jm.Sk().gh("UMLMarkup")){const e=b&&1==b.length?b[0]:void 0;if(e&&e instanceof UclM&&e.internal.getProperties().get("Markup")&&b)return UcJyl(a,e,c,d);if(!b||1!=b.length)return UcJyl(a,null,c,d)}else a.user&&a.analytics.s5a.uqa("uml-markup-editor-paywall",a.user.id,Ucsh,"uml-markup-editor-paywall"),UcyFf(a.Gc);return null}
var UcLyl=class{constructor(a,b,c,d,e,f,g,h,k){this.document=a;this.selection=b;this.user=c;this.analytics=d;this.Th=e;this.Gc=f;this.X0=g;this.nWd=h;this.DO=k;this.bbl="Alice -> Bob\nAlice <-- Bob\nAlice -> Bob: text\nnote right of Alice: note"}khk(){const a=UcROf(this.selection.items);return a&&a.internal.getProperties().get("Markup")?[a]:[]}};UcLyl=__decorate([Uct(),__metadata("design:paramtypes",[UcYM,Uc7N,Uc6,UcQv,UcEB,UcMM,UcWO,UcIyl,UcZN])],UcLyl);var UcMyl=class{constructor(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,u,v,w,x){this.Mo=a;this.Lia=b;this.viewport=c;this.selection=d;this.lb=e;this.xm=g;this.Gc=h;this.tDb=k;this.DNd=l;this.Tg=m;this.X0=n;this.N2c=p;this.bi=q;this.ova=r;this.zEf=t;this.Ei=u;this.jHg=v;this.UW=w;this.nWd=x}};UcMyl=__decorate([Uct(),__param(0,Ucrn(UcBo)),__metadata("design:paramtypes",[Object,Ucvlg,UcWQ,Uc7N,Ucnw,UcdZf,UcTO,UcMM,UccZf,UcNFf,Ucko,UcWO,UcLyl,UcsO,Uclo,UcmDi,UcAM,Uccni,UcRPc,UcIyl])],UcMyl);
function UcNyl(a){Uc2N(a.selection,a.Aa,Uc3N,a.GWl.bind(a));const b=UcRTg(a.Lia);b.add({oc:"ios_inputs"});let c=!1;const d=f=>{c&&b.spacer();c=!0;b.openGrid({prefix:2,O8a:2,width:8});b.addButton({onClick:()=>{a.rNd&&f.xf(a.rNd)},label:f.name});b.close()},e={Tzo:{name:i18n.get("plugin-uml-option-multiplicity"),xf:f=>{const g=f.Fb.value;void 0==g.get("m1")&&f.xb(0,{t:"0..*",m:[]},1,"m1");void 0==g.get("m2")&&f.xb(1,{t:"0..*",m:[]},-1,"m2")}},gEo:{name:i18n.get("plugin-uml-option-line-reverse"),xf:f=>
{var g=f.properties.qg.value;const h=f.properties.ag.value,k=(m,n)=>{n=m instanceof Ucik?Ucik.create({block:m.block,Gf:m.Gf,LE:m.LE,VA:m.VA,mo:m.mo,qn:m.qn,style:n.style,padding:n.padding}):m instanceof Uckk?new Uckk(m.line,m.DF,m.$Ua,n.style,n.padding):new Uchk(m.x,m.y,n.style);n.x=m.x;n.y=m.y;return n};var l=k(g,h);g=k(h,g);f.properties.qg.La(l);f.properties.ag.La(g);l=UcFg(f.properties.Fb.value);l.forEach(m=>{null!=m.location&&(m.location=1-m.location)});0<l.size&&f.properties.Fb.La(l)}}};UcDc(e,
f=>{d(f)});UcSTg(a.Lia,[{content:b,label:""}],{isContextPanel:!0,checkShow:()=>!!a.rNd})}function UcOyl(a,b){return Uca(function*(){const c=UcGyl(a.yda.nWd);if(void 0===c)return{error:"FailedToCreateLucidGenerator"};if(Uczyl(c,{UML_Sequence:b})instanceof Ucb_j)return UcHyl(a.yda.nWd,c),{value:c};c.G4();return{error:"FailedToParseMarkup"}})}
var UcPyl=class extends Ucf{constructor(a,b,c,d,e,f,g,h){super();this.Ei=d;this.Za=e;this.document=f;this.user=g;this.yda=h;this.Tg=this.yda.Tg;this.DNd=this.yda.DNd;this.Lia=this.yda.Lia;this.N2c=this.yda.N2c;this.selection=this.yda.selection;this.Aa=new UcOl(this);this.rNd=null;Ucyyl(h.viewport.navigator,this.ftl.bind(this));this.yda.ova.register("UMLSequenceGenerator",[this.yda.zEf]);UcU0j.Yc(a);Uc54.Yc(a);UcV0j.Yc(a);a.register({className:"UMLSequence",propertyName:"Markup",value:(k,l)=>new Uc9o(k,
()=>{let m,n;if(1==l.length){let q;var p=null!=(q=l[0].internal.getProperties().get("Markup"))?q:null}else p=null;return null!=(n=null==(m=p)?void 0:m.UML_Sequence)?n:null},(m,n)=>m===n,()=>{}),enabled:k=>new Ucu(k,()=>!0,(l,m)=>l===m),vOd:(k,l)=>{{const n={UML_Sequence:l};try{const p=JSON.parse(l);var m=Uc4_j(p)?p:n}catch(p){m=n}}return UcKyl(this.N2c,k,m)},kub:this.N2c.khk});Ucjo(this.Tg,{Ag:[UcEyl,UcJ2],module:UcFyl});h.bi.mg([{type:"advanced_shape_options",registration:{component:UcJ2}}],{selection:{ii:new Set([UcV0j.className,
Uc54.className,Uc54.q7a])}});h.bi.mg([{type:"advanced_shape_options",registration:{component:UcEyl}}],{selection:{ii:new Set([UcU0j.className])}});h.Mo.promise.then(()=>{b.s5a.uqa("uml-shape-library-enabled",g.id,Ucsh,"uml-shape-library-enabled");UcNyl(this)});this.DNd.setCallback(()=>{UcKyl(this.N2c,void 0,void 0,"content gallery data panel")});this.Aa.listen(c,Ucv_j,()=>{this.Ei.wg("uml")||(this.Za.fireEvent(new UcVh({userId:parseInt(this.user.id),method:"shape library",Cj:"uml sequence markup",
documentId:this.document.id})),UcKyl(this.N2c,void 0,void 0,"shape library"))});Ucxyl(h.UW,{id:"UmlViewLibrary",generate:k=>UcOyl(this,k)});UciUg(h.viewport,h.jHg)}ftl(a){const b=this.yda.xm.NO();if(b)for(const c of b.items.values())if(c.id==a&&c instanceof UclM&&c.internal.getProperties().get("Markup"))return!1;return!0}GWl(){const a=c=>{function d(e){if(!(e instanceof Ucik&&e.block))return!1;e=e.block.rg.className;return!!e&&0==e.search("UML")}return d(c.properties.qg.value)||d(c.properties.ag.value)};
this.rNd=null;const b=UcLN(this.selection.items);b&&a(b)&&(this.rNd=b)}};UcPyl=__decorate([Uct(),__metadata("design:paramtypes",[Uc7U,UcQv,Ucu_j,UcAM,UcEB,UcYM,Uc6,UcMyl])],UcPyl);UcgN("umlview","uml",UcPyl);
//# sourceURL=/js/application/universalcanvas_app/chunk/umlview.js?compiled=1
